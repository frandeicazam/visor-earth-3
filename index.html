<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Visor 3D - Cesium + KML</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    html, body, #cesiumContainer { width:100%; height:100vh; margin:0; padding:0; overflow:hidden;}
    #header { position:absolute; z-index:2; left:10px; top:10px; background: rgba(255,255,255,0.9); padding:6px; border-radius:6px; font-family:Arial; }
  </style>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.104/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.104/Build/Cesium/Cesium.js"></script>
</head>
<body>
  <div id="cesiumContainer"></div>
  <div id="header"><strong>Mi Mapa 3D</strong></div>

  <script>
    const CESIUM_ION_TOKEN = '';
    const KML_URL = 'FOSONN.kml';

    if (CESIUM_ION_TOKEN) {
      Cesium.Ion.defaultAccessToken = CESIUM_ION_TOKEN;
    }

    const viewer = new Cesium.Viewer('cesiumContainer', {
      timeline: true,
      animation: false,
      baseLayerPicker: true
    });

    Cesium.KmlDataSource.load(KML_URL, {
    camera: viewer.scene.camera,
    canvas: viewer.scene.canvas,
    clampToGround: true
})
.then(function (dataSource) {
    viewer.dataSources.add(dataSource);

    // Forzar movimiento de cámara al KML
    viewer.flyTo(dataSource, {
        duration: 2,
        maximumHeight: 20000 // Ajuste para no quedar muy lejos
    });
})
.catch(function (err) {
    console.error('Error cargando KML:', err);
    alert('Error cargando KML. Revisa la consola del navegador para más detalles.');
});

  </script>
</body>
</html>
